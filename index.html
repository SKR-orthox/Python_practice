<!doctype html>
<meta charset="utf-8" />
<title>주식 현재가 조회</title>
<style>
  body {font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, sans-serif; margin:40px;}
  .card {max-width:700px;margin:0 auto;padding:24px;border:1px solid #eee;border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,.06);}
  input{width:70%;padding:10px;border:1px solid #ddd;border-radius:10px;}
  button{padding:10px 16px;border:0;border-radius:10px;background:#111;color:#fff;cursor:pointer}
  .muted{color:#666;font-size:13px}
  .result{margin-top:16px;background:#f7f7f9;padding:12px;border-radius:12px}
  .error{margin-top:12px;color:#b00020}
</style>

<div class="card">
  <h1>주식 현재가 조회</h1>
  <p class="muted">예시: 한국 6자리 <code>005930</code> / 완전한 티커 <code>005930.KS</code> / 미국 <code>AAPL</code> / 일본 <code>7203.T</code></p>

  <div>
    <input id="code" placeholder="티커 또는 6자리 종목코드" />
    <button id="btn">조회</button>
  </div>

  <div id="msg" class="error" style="display:none"></div>
  <div id="out" class="result" style="display:none"></div>

  <p class="muted">한국 6자리만 넣으면 코스피(.KS) → 코스닥(.KQ) 순서로 자동 확인합니다.</p>
  <p class="muted">데이터는 지연 제공될 수 있습니다. 투자 판단은 본인 책임입니다.</p>
</div>

<script>
  // ❶ 배포한 백엔드 주소로 바꾸세요
  const API = "https://python-practice-zh21.onrender.com/quote";

  const codeEl = document.querySelector('#code');
  const btn = document.querySelector('#btn');
  const msg = document.querySelector('#msg');
  const out = document.querySelector('#out');

  async function fetchPrice() {
    msg.style.display = "none";
    out.style.display = "none";
    const code = codeEl.value.trim();
    if (!code) { msg.textContent = "코드를 입력하세요."; msg.style.display="block"; return; }
    try {
      const r = await fetch(`${API}?code=${encodeURIComponent(code)}`);
      const j = await r.json();
      if (!r.ok) { throw new Error(j.error || "조회 실패"); }
      out.innerHTML = `<b>티커</b>: ${j.ticker}<br><b>현재가(지연)</b>: ${Number(j.price).toLocaleString()}`;
      out.style.display = "block";
    } catch (e) {
      msg.textContent = e.message;
      msg.style.display = "block";
    }
  }

  btn.addEventListener('click', fetchPrice);
  codeEl.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') fetchPrice(); });
</script>


